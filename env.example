# ============================================================================
# Bybit Copybot Pro - Environment Configuration Template
# ============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit the .env file to version control
# ============================================================================

# ============================================================================
# BYBIT API CONFIGURATION
# ============================================================================
# Get your API credentials from: https://www.bybit.com/app/user/api-management
# IMPORTANT: Use testnet for testing: https://testnet.bybit.com

BYBIT_ENDPOINT=https://api-testnet.bybit.com
# For production, change to: https://api.bybit.com

BYBIT_API_KEY=your_bybit_api_key_here
BYBIT_API_SECRET=your_bybit_api_secret_here
BYBIT_RECV_WINDOW=30000

# ============================================================================
# TELEGRAM CONFIGURATION
# ============================================================================
# Get your Telegram API credentials from: https://my.telegram.org/apps

TELEGRAM_API_ID=your_telegram_api_id_here
TELEGRAM_API_HASH=your_telegram_api_hash_here
TELEGRAM_SESSION=bybit_copybot_session

# Output channel where bot sends messages (use channel ID, e.g., -1001234567890)
OUTPUT_CHANNEL_ID=your_output_channel_id_here

# ============================================================================
# CHANNEL MAPPING (Channel ID to Name)
# ============================================================================
# Format: channel_id1:channel_name1,channel_id2:channel_name2,...
# Example: -1002464706951:Smart Crypto Signals,-1002290339976:Crypto Pump Club

CHANNEL_ID_NAME_MAP=-1002464706951:Smart Crypto Signals Private,-1002290339976:Crypto Pump Club,-1003035035852:Wolf Of Trading

# Allowed channel IDs (comma-separated)
# Example: -1002464706951,-1002290339976,-1003035035852

TELEGRAM_ALLOWED_CHANNELS=-1002464706951,-1002290339976,-1003035035852

# Source channel names (comma-separated, optional)
SRC_CHANNEL_NAMES=Smart Crypto Signals,Crypto Pump Club,Wolf Of Trading

# ============================================================================
# TRADING CONFIGURATION
# ============================================================================

# Timezone for reports and scheduling (IANA timezone format)
TIMEZONE=Europe/Stockholm

# Risk per trade (decimal, e.g., 0.02 = 2%)
RISK_PER_TRADE=0.02

# Base Initial Margin per trade in USDT
BASE_IM=20

# Maximum concurrent trades allowed
MAX_CONCURRENT_TRADES=100

# ============================================================================
# SIGNAL GATING & DEDUPLICATION
# ============================================================================

# Signal deduplication window in seconds (default: 10800 = 3 hours)
DEDUP_SECONDS=10800

# Duplicate signal tolerance percentage (default: 5 = ±5%)
DUP_TOLERANCE_PCT=5

# Block same direction signals for this duration in seconds (default: 10800 = 3 hours)
BLOCK_SAME_DIR_SECONDS=10800

# ============================================================================
# LEVERAGE CONFIGURATION (DO NOT MODIFY - CLIENT SPEC)
# ============================================================================

# Minimum leverage for dynamic mode (CLIENT SPEC: must be ≥7.5)
LEV_MIN=7.5

# Maximum leverage for dynamic mode (CLIENT SPEC: must be ≤25)
LEV_MAX=25

# ============================================================================
# STRATEGY CONFIGURATION (CLIENT SPEC)
# ============================================================================

# Initial margin per entry in USDT
IM_PER_ENTRY_USDT=20

# Trailing stop trigger percentage (CLIENT SPEC: 6.1%)
TRAIL_TRIGGER_PCT=6.1

# Trailing stop distance percentage (CLIENT SPEC: 2.5%)
TRAIL_DISTANCE_PCT=2.5

# Trailing stop poll interval in seconds
TRAIL_POLL_SECONDS=2

# Hedge trigger percentage (CLIENT SPEC: -2%)
HEDGE_TRIGGER_PCT=-2.0

# Re-entry delay in seconds
REENTRY_DELAY_SECONDS=60

# ============================================================================
# PYRAMID STRATEGY (CLIENT SPEC - DO NOT MODIFY)
# ============================================================================
# Pyramid levels are hardcoded in strict_config.py
# +1.5%: Check IM = 20 USDT
# +2.3%: SL to breakeven
# +2.4%: Max leverage
# +2.5%: IM to 40 USDT
# +4.0%: IM to 60 USDT
# +6.0%: IM to 80 USDT
# +8.6%: IM to 100 USDT

PYR_CHECK_INTERVAL=1.0
PYR_MAX_ADDS=100

# ============================================================================
# ADVANCED CONFIGURATION (Optional)
# ============================================================================

# Bybit category (default: linear for USDT perpetuals)
CATEGORY=linear

# ============================================================================
# PRODUCTION BLOCKERS CONFIGURATION (CLIENT SPEC Lines 278-437)
# ============================================================================

# ADMIN TOKEN for killswitch and emergency operations (CLIENT SPEC Line 390)
# Generate a secure random token: python -c "import secrets; print(secrets.token_urlsafe(32))"
ADMIN_TOKEN=your_secure_admin_token_here

# NTP SERVERS for clock discipline (CLIENT SPEC Line 300)
# Comma-separated list of NTP servers
NTP_SERVERS=pool.ntp.org,time.google.com,time.windows.com,time.cloudflare.com

# MARKET GUARDS (CLIENT SPEC Lines 333-341)
MAX_SPREAD_PCT=0.5  # Maximum spread percentage (0.5%)
MIN_LIQUIDITY_USDT=10000  # Minimum liquidity at BBO ($10,000)
MAX_PRICE_DRIFT_BPS=50  # Maximum price drift in basis points (50 = 0.5%)

# HEALTH API CONFIGURATION (CLIENT SPEC Line 386)
HEALTH_API_HOST=0.0.0.0
HEALTH_API_PORT=8080

# KILLSWITCH BEHAVIOR (CLIENT SPEC Line 390)
KILLSWITCH_CLOSE_POSITIONS=false  # Set to true to auto-close positions on killswitch

# ============================================================================
# NOTES
# ============================================================================
# 1. All percentage values are in decimal format (e.g., 2% = 0.02 or 2)
# 2. Channel IDs are negative numbers (e.g., -1001234567890)
# 3. Use testnet for testing: https://testnet.bybit.com
# 4. For production, change BYBIT_ENDPOINT to: https://api.bybit.com
# 5. Keep your .env file secure and never commit it to version control
# 6. Client specifications are enforced in code - do not modify strategy values
# 7. File permissions: chmod 600 .env (CLIENT SPEC Line 309)
# ============================================================================


